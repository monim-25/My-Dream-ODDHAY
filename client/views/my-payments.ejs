<!DOCTYPE html>
<html class="light" lang="bn">

<head>
    <title>আমার পেমেন্ট | ODDHAY</title>
    <%- include('partials/head') %>
</head>

<body class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 min-h-screen">
    <%- include('partials/nav') %>

        <div class="pt-24 pb-16 px-4 max-w-4xl mx-auto">
            <div class="mb-8 flex items-center justify-between">
                <div>
                    <h1 class="text-2xl font-black flex items-center gap-2">
                        <span class="material-symbols-outlined text-primary">receipt_long</span>
                        আমার পেমেন্ট
                    </h1>
                    <p class="text-slate-400 text-sm font-bold mt-1">আপনার সকল পেমেন্টের ইতিহাস</p>
                </div>
                <a href="/courses" class="btn-primary !py-2 !px-4 !text-xs">নতুন কোর্স কিনুন</a>
            </div>

            <% if (payments.length===0) { %>
                <div class="card-smart text-center py-20">
                    <span class="material-symbols-outlined text-6xl text-slate-300 mb-4 block">receipt_long</span>
                    <p class="font-black text-slate-400 text-lg mb-2">কোনো পেমেন্ট নেই</p>
                    <p class="text-slate-400 text-sm mb-6">আপনি এখনো কোনো কোর্স কেনেননি।</p>
                    <a href="/courses" class="btn-primary">কোর্স দেখুন</a>
                </div>
                <% } else { %>
                    <div class="space-y-4">
                        <% payments.forEach(function(p) { %>
                            <div class="card-smart flex items-center gap-5">
                                <!-- Course thumbnail -->
                                <div
                                    class="size-16 rounded-2xl overflow-hidden flex-shrink-0 bg-slate-100 dark:bg-slate-800">
                                    <% if (p.course?.thumbnail) { %>
                                        <img src="<%= p.course.thumbnail %>" class="w-full h-full object-cover">
                                        <% } else { %>
                                            <div class="w-full h-full flex items-center justify-center">
                                                <span class="material-symbols-outlined text-slate-400">school</span>
                                            </div>
                                            <% } %>
                                </div>

                                <!-- Details -->
                                <div class="flex-1 min-w-0">
                                    <h3 class="font-black truncate">
                                        <%= p.course?.title || 'কোর্স' %>
                                    </h3>
                                    <div class="flex items-center gap-3 mt-1 flex-wrap">
                                        <span class="text-xs font-bold text-slate-400">
                                            <%= new Date(p.createdAt).toLocaleDateString('bn-BD', {year: 'numeric' ,
                                                month: 'long' , day: 'numeric' }) %>
                                        </span>
                                        <span class="text-xs font-black capitalize
                            <%= p.paymentMethod === 'bkash' ? 'text-pink-600' : 'text-orange-600' %>">
                                            <%= p.paymentMethod %>
                                        </span>
                                        <span class="text-xs font-mono text-slate-400">
                                            <%= p.transactionId %>
                                        </span>
                                    </div>
                                </div>

                                <!-- Amount & Status -->
                                <div class="text-right flex-shrink-0">
                                    <div class="text-xl font-black text-primary mb-1">৳<%= p.amount %>
                                    </div>
                                    <% if (p.status==='pending' ) { %>
                                        <span
                                            class="text-xs font-black bg-amber-100 dark:bg-amber-500/20 text-amber-600 px-3 py-1 rounded-full">⏳
                                            অপেক্ষমান</span>
                                        <% } else if (p.status==='approved' ) { %>
                                            <span
                                                class="text-xs font-black bg-emerald-100 dark:bg-emerald-500/20 text-emerald-600 px-3 py-1 rounded-full">✅
                                                অনুমোদিত</span>
                                            <% } else { %>
                                                <span
                                                    class="text-xs font-black bg-red-100 dark:bg-red-500/20 text-red-600 px-3 py-1 rounded-full">❌
                                                    বাতিল</span>
                                                <% if (p.adminNote) { %>
                                                    <p class="text-xs text-slate-400 mt-1 max-w-[150px]">
                                                        <%= p.adminNote %>
                                                    </p>
                                                    <% } %>
                                                        <% } %>
                                </div>
                            </div>
                            <% }); %>
                    </div>
                    <% } %>
        </div>
</body>

</html>