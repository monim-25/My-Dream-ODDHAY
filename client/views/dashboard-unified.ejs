<!DOCTYPE html>
<html class="light" lang="bn">

<head>
    <%- include('partials/head') %>
        <title>‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° | ‡¶Ö‡¶ß‡ßç‡¶Ø‡¶æ‡ßü</title>
        <style>
            .glass-card {
                background: rgba(255, 255, 255, 0.8);
                backdrop-filter: blur(12px);
                border: 1px solid rgba(255, 255, 255, 0.3);
            }

            .dark .glass-card {
                background: rgba(15, 23, 42, 0.8);
                border: 1px solid rgba(255, 255, 255, 0.05);
            }

            .course-card:hover .course-img {
                transform: scale(1.05);
            }
        </style>
</head>

<body class="bg-slate-50 dark:bg-[#0f172a] text-slate-900 dark:text-slate-100 min-h-screen">
    <div class="flex flex-col lg:flex-row min-h-screen">
        <!-- Sidebar -->
        <aside id="sidebar"
            class="fixed inset-y-0 left-0 w-72 bg-white dark:bg-slate-900 border-r border-slate-200 dark:border-slate-800 p-8 flex flex-col z-[4000] -translate-x-full lg:relative lg:translate-x-0 transition-transform duration-300">
            <div class="flex items-center justify-between lg:hidden mb-10">
                <div class="flex items-center gap-2">
                    <div class="text-primary">
                        <svg class="size-7" fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4 4H17.3334V17.3334H30.6666V30.6666H44V44H4V4Z" fill="currentColor"></path>
                        </svg>
                    </div>
                    <span class="text-xl font-black tracking-tighter">ODDHAY</span>
                </div>
                <button onclick="toggleSidebar()" class="text-slate-400"><span
                        class="material-symbols-outlined">close</span></button>
            </div>

            <div class="hidden lg:flex items-center gap-3 mb-10">
                <div class="text-primary">
                    <svg class="size-8" fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4 4H17.3334V17.3334H30.6666V30.6666H44V44H4V4Z" fill="currentColor"></path>
                    </svg>
                </div>
                <span class="text-2xl font-black tracking-tighter uppercase">Oddhay</span>
            </div>

            <nav class="space-y-3 flex-1">
                <a href="/dashboard"
                    class="flex items-center gap-3 px-6 py-4 rounded-2xl bg-primary/10 text-primary font-black">
                    <span class="material-symbols-outlined">grid_view</span> ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°
                </a>
                <a href="/settings"
                    class="flex items-center gap-3 px-6 py-4 rounded-2xl text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800/50 font-bold transition-all">
                    <span class="material-symbols-outlined">settings</span> Settings
                </a>
                <a href="/messages"
                    class="flex items-center gap-3 px-6 py-4 rounded-2xl text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800/50 font-bold transition-all">
                    <span class="material-symbols-outlined">mail</span> Message
                </a>
                <a href="/downloads"
                    class="flex items-center gap-3 px-6 py-4 rounded-2xl text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800/50 font-bold transition-all">
                    <span class="material-symbols-outlined">download</span> Download
                </a>
            </nav>

            <div class="pt-6 border-t border-slate-100 dark:border-slate-800">
                <a href="/logout"
                    class="flex items-center gap-3 px-6 py-4 rounded-2xl text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 font-black">
                    <span class="material-symbols-outlined">logout</span> ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-6 md:p-10 max-w-7xl mx-auto w-full pb-32">
            <!-- Header -->
            <header class="flex justify-between items-center mb-10">
                <div class="flex items-center gap-4">
                    <button onclick="toggleSidebar()"
                        class="lg:hidden size-11 flex items-center justify-center rounded-xl bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-800 text-slate-500 shadow-sm">
                        <span class="material-symbols-outlined">menu</span>
                    </button>
                    <div class="flex items-center gap-4">
                        <div
                            class="size-14 rounded-2xl bg-primary/10 border border-primary/20 flex items-center justify-center shrink-0 overflow-hidden">
                            <% if(user.profilePicture) { %>
                                <img src="<%= user.profilePicture %>" class="w-full h-full object-cover">
                                <% } else { %>
                                    <span class="material-symbols-outlined text-primary text-3xl">account_circle</span>
                                    <% } %>
                        </div>
                        <div>
                            <h2 class="text-2xl md:text-3xl font-black leading-none mb-1">
                                Welcome, <%= user.name %>! üéâ
                            </h2>
                            <p class="text-slate-500 font-bold text-sm hidden md:block">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶™‡ßú‡¶æ‡¶∂‡ßã‡¶®‡¶æ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§
                                ‡¶§‡ßã?</p>
                        </div>
                    </div>
                </div>
                <div class="flex-1 max-w-md mx-8 hidden md:block">
                    <div class="relative group">
                        <span
                            class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-primary transition-colors">search</span>
                        <input type="text" id="dashboardSearch" placeholder="‡¶ï‡ßã‡¶∞‡ßç‡¶∏ ‡¶¨‡¶æ ‡¶®‡ßã‡¶ü ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®..."
                            class="w-full pl-12 pr-4 py-3 bg-white dark:bg-slate-900 border border-slate-100 dark:border-slate-800 rounded-2xl focus:outline-none focus:ring-4 focus:ring-primary/10 transition-all font-bold text-sm">

                        <!-- Search Results Dropdown -->
                        <div id="searchResults"
                            class="absolute top-full left-0 right-0 mt-4 bg-white dark:bg-slate-900 rounded-3xl shadow-2xl border border-slate-100 dark:border-slate-800 p-6 hidden z-[5000]">
                            <div id="searchContent" class="space-y-6">
                                <!-- Results will be injected here -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex items-center gap-4">
                    <!-- Notifications -->
                    <div class="relative group">
                        <button
                            class="size-11 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-500 flex items-center justify-center transition-all active:scale-95">
                            <span class="material-symbols-outlined">notifications</span>
                            <% if(notifications && notifications.filter(n=> !n.isRead).length > 0) { %>
                                <span
                                    class="absolute top-2 right-2 size-2.5 bg-rose-500 rounded-full border-2 border-white dark:border-slate-800"></span>
                                <% } %>
                        </button>

                        <!-- Notifications Dropdown -->
                        <div
                            class="absolute right-0 mt-4 w-80 bg-white dark:bg-slate-900 rounded-3xl shadow-2xl border border-slate-100 dark:border-slate-800 p-6 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50">
                            <h5 class="text-sm font-black mb-4 flex items-center justify-between">
                                ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®
                                <span class="text-[10px] text-primary uppercase">‡¶∏‡¶¨‡¶ó‡ßÅ‡¶≤‡ßã</span>
                            </h5>
                            <div class="space-y-4">
                                <% if(notifications && notifications.length> 0) { %>
                                    <% notifications.forEach(notif=> { %>
                                        <div class="flex gap-3">
                                            <div
                                                class="size-8 rounded-lg bg-blue-500/10 text-blue-500 flex items-center justify-center shrink-0">
                                                <span class="material-symbols-outlined text-lg">info</span>
                                            </div>
                                            <div>
                                                <p class="text-[11px] font-black leading-tight">
                                                    <%= notif.title %>
                                                </p>
                                                <p class="text-[10px] text-slate-400 font-bold">
                                                    <%= notif.message %>
                                                </p>
                                            </div>
                                        </div>
                                        <% }) %>
                                            <% } else { %>
                                                <p class="text-[10px] text-slate-400 font-bold text-center py-4">‡¶®‡¶§‡ßÅ‡¶®
                                                    ‡¶ï‡ßã‡¶®‡ßã ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶®‡ßá‡¶á</p>
                                                <% } %>
                            </div>
                        </div>
                    </div>

                    <button onclick="document.documentElement.classList.toggle('dark')"
                        class="size-11 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-500 flex items-center justify-center transition-all active:scale-95">
                        <span class="material-symbols-outlined dark:hidden">dark_mode</span>
                        <span class="material-symbols-outlined hidden dark:block text-amber-400">light_mode</span>
                    </button>
                    <a href="/profile"
                        class="size-11 rounded-xl bg-primary text-white flex items-center justify-center font-black shadow-lg shadow-primary/20 transition-transform active:scale-95 overflow-hidden border border-white dark:border-slate-800">
                        <% if(user.profilePicture) { %>
                            <img src="<%= user.profilePicture %>" class="w-full h-full object-cover">
                            <% } else { %>
                                <%= user.name[0] %>
                                    <% } %>
                    </a>
                </div>
            </header>

            <!-- Parent Request Alert -->
            <% if(parentRequests && parentRequests.length> 0) { %>
                <div
                    class="mb-10 p-6 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-[2.5rem] text-white flex flex-col md:flex-row items-center justify-between gap-6 shadow-xl shadow-emerald-500/20 animate-pop">
                    <div class="flex items-center gap-4 text-center md:text-left">
                        <div class="size-12 rounded-full bg-white/20 flex items-center justify-center">
                            <span class="material-symbols-outlined">family_restroom</span>
                        </div>
                        <div>
                            <h4 class="font-black text-lg">‡¶Ö‡¶≠‡¶ø‡¶≠‡¶æ‡¶¨‡¶ï ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü!</h4>
                            <p class="text-white/80 text-sm font-bold"><strong>
                                    <%= parentRequests[0].name %>
                                </strong> ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶Æ‡¶®‡¶ø‡¶ü‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß ‡¶ú‡¶æ‡¶®‡¶ø‡ßü‡ßá‡¶õ‡ßá‡¶®‡•§</p>
                        </div>
                    </div>
                    <div class="flex gap-3">
                        <form action="/student/reject-parent/<%= parentRequests[0]._id %>" method="POST">
                            <button type="submit"
                                class="px-6 py-3 bg-white/10 text-white rounded-2xl font-black text-sm hover:bg-white/20 transition-all">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤
                                ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                        </form>
                        <form action="/student/approve-parent/<%= parentRequests[0]._id %>" method="POST">
                            <button type="submit"
                                class="px-8 py-3 bg-white text-emerald-600 rounded-2xl font-black text-sm shadow-lg shadow-black/10 hover:scale-105 active:scale-95 transition-all">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶∞‡ßÅ‡¶≠
                                ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                        </form>
                    </div>
                </div>
                <% } %>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-10">
                        <!-- Left: Progress and Active Learning -->
                        <div class="lg:col-span-2 space-y-10">

                            <!-- Services/Shortcuts -->
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                <a href="/courses"
                                    class="bg-white dark:bg-slate-900 p-6 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm hover:border-primary hover:shadow-lg hover:shadow-primary/5 transition-all text-center group">
                                    <div
                                        class="size-12 rounded-2xl bg-blue-500/10 text-blue-500 flex items-center justify-center mb-4 mx-auto group-hover:scale-110 transition-transform">
                                        <span class="material-symbols-outlined text-2xl">school</span>
                                    </div>
                                    <p
                                        class="text-[11px] font-black uppercase tracking-widest text-slate-500 group-hover:text-primary transition-colors">
                                        Class</p>
                                </a>
                                <a href="/notes"
                                    class="bg-white dark:bg-slate-900 p-6 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm hover:border-primary hover:shadow-lg hover:shadow-primary/5 transition-all text-center group">
                                    <div
                                        class="size-12 rounded-2xl bg-amber-500/10 text-amber-500 flex items-center justify-center mb-4 mx-auto group-hover:scale-110 transition-transform">
                                        <span class="material-symbols-outlined text-2xl">description</span>
                                    </div>
                                    <p
                                        class="text-[11px] font-black uppercase tracking-widest text-slate-500 group-hover:text-primary transition-colors">
                                        Notes</p>
                                </a>
                                <a href="/exams"
                                    class="bg-white dark:bg-slate-900 p-6 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm hover:border-primary hover:shadow-lg hover:shadow-primary/5 transition-all text-center group">
                                    <div
                                        class="size-12 rounded-2xl bg-rose-500/10 text-rose-500 flex items-center justify-center mb-4 mx-auto group-hover:scale-110 transition-transform">
                                        <span class="material-symbols-outlined text-2xl">edit_note</span>
                                    </div>
                                    <p
                                        class="text-[11px] font-black uppercase tracking-widest text-slate-500 group-hover:text-primary transition-colors">
                                        Exam</p>
                                </a>
                                <a href="/ai-assistant"
                                    class="bg-white dark:bg-slate-900 p-6 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm hover:border-primary hover:shadow-lg hover:shadow-primary/5 transition-all text-center group">
                                    <div
                                        class="size-12 rounded-2xl bg-indigo-500/10 text-indigo-500 flex items-center justify-center mb-4 mx-auto group-hover:scale-110 transition-transform">
                                        <span class="material-symbols-outlined text-2xl">smart_toy</span>
                                    </div>
                                    <p
                                        class="text-[11px] font-black uppercase tracking-widest text-slate-500 group-hover:text-primary transition-colors">
                                        AI</p>
                                </a>
                            </div>

                            <!-- Resume Learning -->
                            <% if(user.lastWatchedLesson && user.lastWatchedLesson.course) { %>
                                <div
                                    class="bg-white dark:bg-slate-900 p-8 md:p-10 rounded-[3rem] border border-slate-100 dark:border-slate-800 shadow-sm relative overflow-hidden group">
                                    <div
                                        class="absolute -right-20 -top-20 size-64 bg-primary/5 rounded-full blur-3xl transition-all group-hover:bg-primary/10">
                                    </div>
                                    <div class="relative z-10 flex flex-col md:flex-row items-center gap-8">
                                        <div
                                            class="size-24 md:size-32 rounded-3xl bg-slate-100 dark:bg-slate-800 overflow-hidden relative shrink-0 shadow-lg">
                                            <img src="<%= user.lastWatchedLesson.course.thumbnail || '/images/course-default.jpg' %>"
                                                alt="Course" class="w-full h-full object-cover">
                                            <div
                                                class="absolute inset-0 bg-black/20 flex items-center justify-center text-white">
                                                <span class="material-symbols-outlined text-4xl">play_circle</span>
                                            </div>
                                        </div>
                                        <div class="flex-1 text-center md:text-left">
                                            <p
                                                class="text-[10px] font-black text-primary uppercase tracking-[0.2em] mb-2">
                                                ‡¶∂‡ßá‡¶ñ‡¶æ ‡¶ö‡¶æ‡¶≤‡¶ø‡ßü‡ßá ‡¶Ø‡¶æ‡¶® (RESUME)</p>
                                            <h3 class="text-2xl font-black mb-2">
                                                <%= user.lastWatchedLesson.lessonTitle %>
                                            </h3>
                                            <p class="text-slate-500 font-bold text-sm mb-6">
                                                <%= user.lastWatchedLesson.course.title %>
                                            </p>
                                            <a href="/course-details/<%= user.lastWatchedLesson.course._id %>"
                                                class="inline-flex items-center gap-2 px-8 py-3 bg-slate-900 dark:bg-white dark:text-slate-900 text-white rounded-2xl font-black text-sm hover:scale-105 active:scale-95 transition-all">
                                                ‡¶ö‡¶æ‡¶≤‡¶ø‡ßü‡ßá ‡¶Ø‡¶æ‡¶® <span
                                                    class="material-symbols-outlined text-lg">arrow_forward</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <% } %>

                                    <!-- Available Courses -->
                                    <div class="space-y-6">
                                        <div class="flex items-center justify-between px-2">
                                            <h4 class="text-xl font-black">‡¶â‡¶™‡¶≤‡¶¨‡ßç‡¶ß ‡¶ï‡ßã‡¶∞‡ßç‡¶∏‡¶∏‡¶Æ‡ßÇ‡¶π (<%= user.classLevel %>)
                                            </h4>
                                            <a href="/courses"
                                                class="text-xs font-black uppercase text-primary hover:underline">‡¶∏‡¶¨‡¶ó‡ßÅ‡¶≤‡ßã
                                                ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</a>
                                        </div>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            <% if(recommendations && recommendations.length> 0) { %>
                                                <% recommendations.forEach(course=> { %>
                                                    <div onclick="window.location.href='/course-details/<%= course._id %>'"
                                                        class="group cursor-pointer bg-white dark:bg-slate-900 border border-slate-100 dark:border-slate-800 p-5 rounded-[2.5rem] shadow-sm hover:border-primary transition-all">
                                                        <div class="flex gap-4">
                                                            <div
                                                                class="size-20 rounded-2xl bg-slate-100 dark:bg-slate-800 overflow-hidden shrink-0">
                                                                <img src="<%= course.thumbnail || '/images/course-default.jpg' %>"
                                                                    class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
                                                            </div>
                                                            <div class="flex-1 min-w-0">
                                                                <h5 class="font-black text-sm truncate mb-1">
                                                                    <%= course.title %>
                                                                </h5>
                                                                <div
                                                                    class="flex items-center gap-1.5 text-slate-400 mb-2">
                                                                    <span
                                                                        class="material-symbols-outlined text-[14px]">school</span>
                                                                    <span class="text-[10px] font-bold">
                                                                        <%= course.subject %>
                                                                    </span>
                                                                </div>
                                                                <span
                                                                    class="px-3 py-1 bg-primary text-white rounded-lg text-[9px] font-black uppercase">‡¶è‡¶®‡¶∞‡ßã‡¶≤
                                                                    ‡¶ï‡¶∞‡ßÅ‡¶®</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <% }) %>
                                                        <% } else { %>
                                                            <div
                                                                class="col-span-full py-12 text-center border-2 border-dashed border-slate-100 dark:border-slate-800 rounded-[3rem]">
                                                                <p class="text-slate-400 font-bold italic">‡¶è‡¶á ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§‡ßá
                                                                    ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶®‡ßã ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡ßã‡¶∞‡ßç‡¶∏ ‡¶®‡ßá‡¶á‡•§</p>
                                                            </div>
                                                            <% } %>
                                        </div>
                                    </div>
                        </div>

                        <!-- Right Collumn: Leaderboard and Recommendations -->
                        <div class="space-y-10">
                            <!-- Leaderboard -->
                            <div
                                class="bg-white dark:bg-slate-900 p-8 rounded-[3rem] border border-slate-100 dark:border-slate-800 shadow-sm">
                                <h4 class="text-xl font-black mb-6 flex items-center gap-2">
                                    <span class="material-symbols-outlined text-amber-500">emoji_events</span> ‡¶ü‡¶™
                                    ‡¶∏‡ßç‡¶ü‡ßÅ‡¶°‡ßá‡¶®‡ßç‡¶ü
                                </h4>
                                <div class="space-y-6">
                                    <% leaderboard.slice(0, 3).forEach((student, idx)=> { %>
                                        <div class="flex items-center gap-4">
                                            <div
                                                class="size-10 rounded-full <%= idx === 0 ? 'bg-amber-100 text-amber-600' : (idx === 1 ? 'bg-slate-100 text-slate-400' : 'bg-orange-50 text-orange-400') %> flex items-center justify-center font-black text-sm">
                                                <%= idx===0 ? 'ü•á' : (idx===1 ? 'ü•à' : 'ü•â' ) %>
                                            </div>
                                            <div class="flex-1">
                                                <p class="text-sm font-black">
                                                    <%= student.name %>
                                                </p>
                                                <p class="text-[10px] font-bold text-slate-400">
                                                    <%= student.classLevel %>
                                                </p>
                                            </div>
                                            <span class="text-xs font-black text-primary">
                                                <%= student.totalScore %>
                                            </span>
                                        </div>
                                        <% }) %>
                                </div>
                                <button
                                    class="w-full mt-6 py-3 bg-slate-50 dark:bg-slate-800 rounded-2xl text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-primary transition-colors">‡¶∏‡¶¨‡¶ó‡ßÅ‡¶≤‡ßã
                                    ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
                            </div>

                            <!-- Notice Board -->
                            <div
                                class="bg-indigo-600 p-8 rounded-[3rem] text-white shadow-xl shadow-indigo-600/20 relative overflow-hidden">
                                <span
                                    class="material-symbols-outlined absolute -right-4 -bottom-4 text-white/10 text-9xl">campaign</span>
                                <h4 class="text-xl font-black mb-2 flex items-center gap-2 relative z-10">
                                    ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶¨‡ßã‡¶∞‡ßç‡¶° üì£
                                </h4>
                                <p class="text-white/80 text-xs font-bold relative z-10 leading-relaxed">
                                    ‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ ‡¶ì‡¶°‡ßç‡¶ß‡¶æ‡ßü ‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶® ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ü‡¶´‡¶∞‡ßç‡¶Æ‡ßá! ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶ø‡ßü‡¶Æ‡¶ø‡¶§ ‡¶™‡ßú‡¶æ‡¶∂‡ßã‡¶®‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶Ö‡¶ó‡ßç‡¶∞‡¶ó‡¶§‡¶ø‡¶∞ ‡¶∏‡¶¨ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶è‡¶ñ‡¶æ‡¶®‡ßá
                                    ‡¶™‡¶æ‡¶¨‡ßá‡¶®‡•§
                                    <br><br>
                                    <span class="text-amber-300">‡¶®‡¶§‡ßÅ‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü:</span> ‡¶Ü‡¶ó‡¶æ‡¶Æ‡ßÄ ‡¶ï‡ßÅ‡¶á‡¶ú ‡¶ï‡¶Æ‡ßç‡¶™‡¶ø‡¶ü‡¶ø‡¶∂‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶®‡¶ø‡¶ú‡ßá‡¶ï‡ßá
                                    ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§ ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶®‡•§
                                </p>
                            </div>


                        </div>
                    </div>
        </main>
    </div>

    <!-- Mobile Bottom Nav -->
    <nav
        class="fixed bottom-0 left-0 right-0 z-[100] h-20 bg-white/80 dark:bg-slate-900/80 backdrop-blur-xl border-t border-slate-100 dark:border-slate-800 flex items-center justify-around lg:hidden pb-safe">
        <a href="/dashboard" class="flex flex-col items-center gap-1 text-primary">
            <span class="material-symbols-outlined text-[24px]">home</span>
            <span class="text-[9px] font-black uppercase">‡¶π‡ßã‡¶Æ</span>
        </a>
        <a href="/courses" class="flex flex-col items-center gap-1 text-slate-400">
            <span class="material-symbols-outlined text-[24px]">school</span>
            <span class="text-[9px] font-black uppercase">‡¶ï‡ßç‡¶≤‡¶æ‡¶∏</span>
        </a>
        <a href="/notes" class="flex flex-col items-center gap-1 text-slate-400">
            <span class="material-symbols-outlined text-[24px]">description</span>
            <span class="text-[9px] font-black uppercase">‡¶®‡ßã‡¶ü</span>
        </a>
        <a href="/exams" class="flex flex-col items-center gap-1 text-slate-400">
            <span class="material-symbols-outlined text-[24px]">edit_note</span>
            <span class="text-[9px] font-black uppercase">‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ</span>
        </a>
        <a href="/profile" class="flex flex-col items-center gap-1 text-slate-400">
            <span class="material-symbols-outlined text-[24px]">person</span>
            <span class="text-[9px] font-black uppercase">‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</span>
        </a>
    </nav>

    <script>
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('-translate-x-full');
        }

        // Apply progress bars
        document.querySelectorAll('.progress-bar').forEach(bar => {
            bar.style.width = bar.getAttribute('data-width');
        });

        // Live Search Logic
        const searchInput = document.getElementById('dashboardSearch');
        const searchResults = document.getElementById('searchResults');
        const searchContent = document.getElementById('searchContent');
        let searchTimeout;

        searchInput.addEventListener('input', (e) => {
            clearTimeout(searchTimeout);
            const query = e.target.value.trim();

            if (query.length < 2) {
                searchResults.classList.add('hidden');
                return;
            }

            searchTimeout = setTimeout(async () => {
                try {
                    const response = await fetch(`/api/search?q=${encodeURIComponent(query)}`);
                    const data = await response.json();

                    if (data.courses.length === 0 && data.notes.length === 0) {
                        searchContent.innerHTML = '<p class="text-xs text-slate-400 font-bold text-center py-4">‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø</p>';
                    } else {
                        let html = '';
                        if (data.courses.length > 0) {
                            html += '<div class="space-y-3"><p class="text-[10px] font-black text-slate-400 uppercase tracking-widest">‡¶ï‡ßã‡¶∞‡ßç‡¶∏‡¶∏‡¶Æ‡ßÇ‡¶π</p>';
                            data.courses.forEach(c => {
                                html += `
                                    <a href="/course-details/${c._id}" class="flex items-center gap-3 p-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition-all">
                                        <img src="${c.thumbnail || '/images/course-default.jpg'}" class="size-10 rounded-lg object-cover">
                                        <div>
                                            <p class="text-xs font-black">${c.title}</p>
                                            <p class="text-[9px] text-primary font-bold">${c.subject}</p>
                                        </div>
                                    </a>
                                `;
                            });
                            html += '</div>';
                        }
                        if (data.notes.length > 0) {
                            html += '<div class="space-y-3"><p class="text-[10px] font-black text-slate-400 uppercase tracking-widest">‡¶®‡ßã‡¶ü‡¶∏</p>';
                            data.notes.forEach(n => {
                                html += `
                                    <a href="/notes" class="flex items-center gap-3 p-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition-all">
                                        <div class="size-10 rounded-lg bg-orange-100 text-orange-500 flex items-center justify-center">
                                            <span class="material-symbols-outlined text-lg">description</span>
                                        </div>
                                        <p class="text-xs font-black">${n.title}</p>
                                    </a>
                                `;
                            });
                            html += '</div>';
                        }
                        searchContent.innerHTML = html;
                    }
                    searchResults.classList.remove('hidden');
                } catch (err) {
                    console.error('Search error:', err);
                }
            }, 300);
        });

        // Close search when clicking outside
        document.addEventListener('click', (e) => {
            if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {
                searchResults.classList.add('hidden');
            }
        });

        // Auto-close sidebar on mobile when clicking outside
        document.addEventListener('click', (e) => {
            const sidebar = document.getElementById('sidebar');
            const toggle = document.querySelector('button[onclick="toggleSidebar()"]');
            if (window.innerWidth < 1024 && sidebar && !sidebar.contains(e.target) && !toggle.contains(e.target) && !sidebar.classList.contains('-translate-x-full')) {
                sidebar.classList.add('-translate-x-full');
            }
        });
    </script>
</body>

</html>