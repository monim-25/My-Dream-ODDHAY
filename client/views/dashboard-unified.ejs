<!DOCTYPE html>
<html class="light" lang="bn">

<head>
    <%- include('partials/head') %>
        <title>‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° | ‡¶Ö‡¶ß‡ßç‡¶Ø‡¶æ‡ßü</title>
</head>

<body class="bg-slate-50 dark:bg-[#0f172a] text-slate-900 dark:text-slate-100 min-h-screen">
    <div class="flex flex-col md:flex-row min-h-screen">
        <!-- Vertical Sidebar -->
        <aside
            class="w-full md:w-64 bg-white dark:bg-slate-900 border-r border-slate-200 dark:border-slate-800 p-6 flex flex-col">
            <div class="mb-10">
                <a href="/" class="flex items-center gap-2 group">
                    <div class="text-primary group-hover:rotate-12 transition-transform duration-300">
                        <svg class="size-8" fill="none" viewbox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4 4H17.3334V17.3334H30.6666V30.6666H44V44H4V4Z" fill="currentColor"></path>
                        </svg>
                    </div>
                    <span class="text-2xl font-black tracking-tighter">‡¶Ö‡¶ß‡ßç‡¶Ø‡¶æ‡ßü</span>
                </a>
            </div>

            <nav class="space-y-1 flex-1">
                <a href="/dashboard"
                    class="flex items-center gap-3 px-4 py-3 rounded-xl bg-primary/10 text-primary font-bold">
                    <span class="material-symbols-outlined">grid_view</span> ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°
                </a>
                <a href="/courses"
                    class="flex items-center gap-3 px-4 py-3 rounded-xl text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800 font-bold transition-all">
                    <span class="material-symbols-outlined">local_library</span> ‡¶ï‡ßã‡¶∞‡ßç‡¶∏‡¶∏‡¶Æ‡ßÇ‡¶π
                </a>
                <a href="/profile"
                    class="flex items-center gap-3 px-4 py-3 rounded-xl text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800 font-bold transition-all">
                    <span class="material-symbols-outlined">person</span> ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤
                </a>
            </nav>

            <div class="pt-6 border-t border-slate-100 dark:border-slate-800">
                <a href="/logout"
                    class="flex items-center gap-3 px-4 py-3 rounded-xl text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 font-black transition-all">
                    <span class="material-symbols-outlined">logout</span> ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü
                </a>
            </div>
        </aside>

        <!-- Main Area -->
        <main class="flex-1 p-6 md:p-10">
            <!-- Header -->
            <header class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-10">
                <div>
                    <h2 class="text-3xl font-black mb-1">‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ, <%= user ? user.name : '‡¶¨‡¶®‡ßç‡¶ß‡ßÅ' %>! üëã</h2>
                    <p class="text-slate-500 font-bold text-sm">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶è‡¶ñ‡¶® ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡•§ ‡¶™‡ßú‡¶æ‡¶∂‡ßã‡¶®‡¶æ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
                </div>
                <div class="flex items-center gap-4">
                    <button
                        class="size-12 rounded-2xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-center text-slate-500"
                        onclick="document.documentElement.classList.toggle('dark')">
                        <span class="material-symbols-outlined">contrast</span>
                    </button>
                    <div
                        class="size-12 rounded-2xl bg-primary text-white flex items-center justify-center font-black text-xl shadow-lg shadow-primary/20">
                        <%= user ? (user.name[0] || 'U' ) : 'U' %>
                    </div>
                </div>
            </header>

            <!-- Grid Content -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Left Section: Stats & Resume -->
                <div class="lg:col-span-2 space-y-8">
                    <!-- Stat Cards -->
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-6">
                        <div
                            class="bg-white dark:bg-slate-900 p-6 rounded-[2rem] border border-slate-100 dark:border-slate-800 shadow-sm group hover:border-primary transition-all">
                            <div
                                class="size-12 rounded-2xl bg-blue-500/10 text-blue-500 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                                <span class="material-symbols-outlined">menu_book</span>
                            </div>
                            <h3 class="text-3xl font-black mb-1">
                                <%= (user && user.completedLessons) ? user.completedLessons.length : 0 %>
                            </h3>
                            <p class="text-xs font-black text-slate-400 uppercase tracking-widest">‡¶≤‡ßá‡¶∏‡¶® ‡¶∂‡ßá‡¶∑</p>
                        </div>
                        <div
                            class="bg-white dark:bg-slate-900 p-6 rounded-[2rem] border border-slate-100 dark:border-slate-800 shadow-sm group hover:border-amber-500 transition-all">
                            <div
                                class="size-12 rounded-2xl bg-amber-500/10 text-amber-500 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                                <span class="material-symbols-outlined">emoji_events</span>
                            </div>
                            <h3 class="text-3xl font-black mb-1">
                                <%= (user && user.quizResults) ? user.quizResults.length : 0 %>
                            </h3>
                            <p class="text-xs font-black text-slate-400 uppercase tracking-widest">‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®</p>
                        </div>
                        <div
                            class="bg-white dark:bg-slate-900 p-6 rounded-[2rem] border border-slate-100 dark:border-slate-800 shadow-sm group hover:border-emerald-500 transition-all">
                            <div
                                class="size-12 rounded-2xl bg-emerald-500/10 text-emerald-500 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                                <span class="material-symbols-outlined">star</span>
                            </div>
                            <h3 class="text-3xl font-black mb-1">
                                <%= (user && user.role) ? user.role.toUpperCase() : 'STUDENT' %>
                            </h3>
                            <p class="text-xs font-black text-slate-400 uppercase tracking-widest">‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≤‡ßá‡¶≠‡ßá‡¶≤</p>
                        </div>
                    </div>

                    <!-- Welcome Card for New Users -->
                    <div
                        class="bg-primary p-10 rounded-[3rem] text-white relative overflow-hidden shadow-2xl shadow-primary/20">
                        <div class="relative z-10">
                            <h3 class="text-3xl font-black mb-4">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßú‡¶æ‡¶∂‡ßã‡¶®‡¶æ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®!</h3>
                            <p class="text-white/80 font-bold mb-8 max-w-md">‡¶Ö‡¶ß‡ßç‡¶Ø‡¶æ‡ßü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ü‡¶ú‡¶á ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶õ‡¶®‡ßç‡¶¶‡ßá‡¶∞
                                ‡¶ï‡ßã‡¶∞‡ßç‡¶∏‡ßá ‡¶è‡¶®‡¶∞‡ßã‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶®‡¶ø‡¶ú‡ßá‡¶ï‡ßá ‡¶è‡¶ó‡¶ø‡ßü‡ßá ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶®‡•§</p>
                            <a href="/courses"
                                class="inline-flex items-center gap-2 px-8 py-4 bg-white text-primary rounded-2xl font-black hover:scale-105 transition-all">
                                ‡¶ï‡ßã‡¶∞‡ßç‡¶∏‡¶ó‡ßÅ‡¶≤‡ßã ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® <span class="material-symbols-outlined">arrow_forward</span>
                            </a>
                        </div>
                        <div class="absolute -bottom-10 -right-10 opacity-10">
                            <span class="material-symbols-outlined text-[200px]">rocket_launch</span>
                        </div>
                    </div>
                </div>

                <!-- Right Section: Leaderboard/Updates -->
                <div class="space-y-8">
                    <div
                        class="bg-white dark:bg-slate-900 p-8 rounded-[2.5rem] border border-slate-200 dark:border-slate-800">
                        <h4 class="text-xl font-black mb-6">‡¶∏‡ßá‡¶∞‡¶æ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞‡ßç‡¶•‡ßÄ (Leaderboard)</h4>
                        <div class="space-y-6">
                            <% if (typeof leaderboard !=='undefined' && leaderboard && leaderboard.length> 0) { %>
                                <% leaderboard.forEach((entry, idx)=> { %>
                                    <div class="flex items-center gap-4">
                                        <div
                                            class="size-10 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center font-black text-sm">
                                            <%= idx + 1 %>
                                        </div>
                                        <div class="flex-1">
                                            <p class="font-black text-sm">
                                                <%= entry.name %>
                                            </p>
                                            <p class="text-[10px] text-slate-500 font-bold">
                                                <%= entry.classLevel %>
                                            </p>
                                        </div>
                                        <div class="font-black text-primary text-sm">
                                            <%= entry.totalScore %>
                                        </div>
                                    </div>
                                    <% }) %>
                                        <% } else { %>
                                            <p class="text-slate-400 font-bold text-sm text-center py-4">‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡¶æ‡¶ì‡ßü‡¶æ
                                                ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø</p>
                                            <% } %>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</body>

</html>