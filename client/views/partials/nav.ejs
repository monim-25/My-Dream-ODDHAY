<header class="fixed top-0 left-0 w-full z-[1000] glass-nav transition-all duration-300">
    <div class="max-w-7xl mx-auto px-6 h-16 flex items-center justify-between">
        <!-- Logo -->
        <a href="/" class="flex items-center gap-2 group">
            <div class="text-primary transform group-hover:rotate-12 transition-transform duration-300">
                <svg class="size-7" fill="none" viewbox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 4H17.3334V17.3334H30.6666V30.6666H44V44H4V4Z" fill="currentColor"></path>
                </svg>
            </div>
            <h1 class="text-xl font-black tracking-tighter text-slate-900 dark:text-white">ODDHAY</h1>
        </a>

        <!-- Desktop Nav -->
        <nav class="hidden lg:flex items-center gap-8">
            <a href="/"
                class="text-[13px] font-bold opacity-70 hover:opacity-100 hover:text-primary transition-all">হোম</a>
            <a href="/#features"
                class="text-[13px] font-bold opacity-70 hover:opacity-100 hover:text-primary transition-all">সেবাসমূহ</a>
            <a href="/courses"
                class="text-[13px] font-bold opacity-70 hover:opacity-100 hover:text-primary transition-all">কোর্সসমূহ</a>
            <a href="/about"
                class="text-[13px] font-bold opacity-70 hover:opacity-100 hover:text-primary transition-all">আমাদের
                সম্পর্কে</a>
            <a href="/#contact"
                class="text-[13px] font-bold opacity-70 hover:opacity-100 hover:text-primary transition-all">যোগাযোগ</a>
        </nav>

        <!-- Right Actions -->
        <div class="flex items-center gap-4">
            <button
                class="p-2 rounded-lg bg-slate-50 dark:bg-slate-800 border border-slate-100 dark:border-slate-700 hover:bg-primary/5 transition-colors"
                id="theme-toggle">
                <span id="theme-toggle-dark-icon"
                    class="material-symbols-outlined text-[18px] hidden dark:block text-amber-400">light_mode</span>
                <span id="theme-toggle-light-icon"
                    class="material-symbols-outlined text-[18px] block dark:hidden text-slate-600">dark_mode</span>
            </button>

            <div class="hidden md:flex items-center gap-2">
                <% if (locals.user) { %>
                    <% if (['admin', 'superadmin' ].includes(locals.user.role)) { %>
                        <a href="/admin" class="btn-primary !py-2 !px-4 !text-[12px] !bg-indigo-600">Admin Panel</a>
                        <% } else { %>
                            <a href="/dashboard" class="btn-primary !py-2 !px-4 !text-[12px]">ড্যাশবোর্ড</a>
                            <% } %>
                                <a href="/logout"
                                    class="btn-secondary !py-2 !px-3 !text-[11px] !bg-red-500/5 !text-red-500">লগআউট</a>
                                <% } else { %>
                                    <a href="/login" class="btn-secondary !py-2 !px-4 !text-[12px]">লগইন</a>
                                    <a href="/register" class="btn-primary !py-2 !px-5 !text-[12px]">রেজিস্ট্রেশন</a>
                                    <% } %>
            </div>

            <!-- Hamburger -->
            <button class="lg:hidden flex flex-col gap-1 p-1.5" onclick="toggleSidebar(true)">
                <span class="w-6 h-0.5 bg-slate-900 dark:bg-white rounded-full"></span>
                <span class="w-6 h-0.5 bg-primary rounded-full"></span>
                <span class="w-6 h-0.5 bg-slate-900 dark:bg-white rounded-full"></span>
            </button>
        </div>
    </div>
</header>

<!-- Sidebar Overlay -->
<div id="sidebar-overlay"
    class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[2000] hidden opacity-0 transition-opacity duration-300"
    onclick="toggleSidebar(false)"></div>

<aside id="mobile-sidebar"
    class="fixed top-0 right-0 w-[80%] max-w-sm h-full bg-white dark:bg-slate-950 z-[2001] translate-x-full shadow-2xl transition-transform duration-500 p-8 flex flex-col">
    <div class="flex items-center justify-between mb-10">
        <h2 class="text-lg font-black text-primary">মেনু</h2>
        <button
            class="size-10 rounded-xl bg-slate-50 dark:bg-slate-800 flex items-center justify-center border border-slate-100 dark:border-slate-700"
            onclick="toggleSidebar(false)">
            <span class="material-symbols-outlined text-[20px]">close</span>
        </button>
    </div>

    <nav class="flex flex-col gap-4">
        <a href="/" class="text-lg font-bold hover:text-primary transition-all" onclick="toggleSidebar(false)">হোম</a>
        <a href="/#features" class="text-lg font-bold hover:text-primary transition-all"
            onclick="toggleSidebar(false)">সেবাসমূহ</a>
        <a href="/courses" class="text-lg font-bold hover:text-primary transition-all"
            onclick="toggleSidebar(false)">কোর্সসমূহ</a>
        <a href="/about" class="text-lg font-bold hover:text-primary transition-all"
            onclick="toggleSidebar(false)">আমাদের সম্পর্কে</a>
        <a href="/#contact" class="text-lg font-bold hover:text-primary transition-all"
            onclick="toggleSidebar(false)">যোগাযোগ</a>
    </nav>

    <div class="mt-auto flex flex-col gap-3">
        <% if (locals.user) { %>
            <% if (['admin', 'superadmin' ].includes(locals.user.role)) { %>
                <a href="/admin" class="btn-primary w-full !h-12 !text-sm !bg-indigo-600">Admin Panel</a>
                <% } else { %>
                    <a href="/dashboard" class="btn-primary w-full !h-12 !text-sm">ড্যাশবোর্ড</a>
                    <% } %>
                        <a href="/logout" class="btn-secondary w-full !h-12 !bg-red-500/5 !text-red-500">লগআউট</a>
                        <% } else { %>
                            <a href="/login"
                                class="btn-secondary w-full !h-12 !bg-slate-100 dark:!bg-slate-800">লগইন</a>
                            <a href="/register" class="btn-primary w-full !h-12 !text-sm">রেজিস্ট্রেশন</a>
                            <% } %>
    </div>
</aside>

<script>
    function toggleSidebar(open) {
        const sidebar = document.getElementById('mobile-sidebar');
        const overlay = document.getElementById('sidebar-overlay');
        if (open) {
            overlay.classList.remove('hidden');
            setTimeout(() => {
                overlay.classList.remove('opacity-0');
                sidebar.classList.remove('translate-x-full');
            }, 10);
            document.body.style.overflow = 'hidden';
        } else {
            overlay.classList.add('opacity-0');
            sidebar.classList.add('translate-x-full');
            setTimeout(() => overlay.classList.add('hidden'), 500);
            document.body.style.overflow = '';
        }
    }

    // Theme Toggle Logic
    const themeToggleBtn = document.getElementById('theme-toggle');
    themeToggleBtn.addEventListener('click', function () {
        // if set via local storage previously
        if (localStorage.getItem('color-theme')) {
            if (localStorage.getItem('color-theme') === 'light') {
                document.documentElement.classList.add('dark');
                localStorage.setItem('color-theme', 'dark');
            } else {
                document.documentElement.classList.remove('dark');
                localStorage.setItem('color-theme', 'light');
            }
            // if NOT set via local storage previously
        } else {
            if (document.documentElement.classList.contains('dark')) {
                document.documentElement.classList.remove('dark');
                localStorage.setItem('color-theme', 'light');
            } else {
                document.documentElement.classList.add('dark');
                localStorage.setItem('color-theme', 'dark');
            }
        }
    });
</script>