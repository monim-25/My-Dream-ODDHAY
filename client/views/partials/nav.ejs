<header class="fixed top-0 left-0 w-full z-[1000] glass-nav">
    <div class="max-w-7xl mx-auto px-6 h-16 flex items-center justify-between">
        <!-- Logo -->
        <a href="/" class="flex items-center gap-2 group">
            <div class="text-primary transform group-hover:rotate-12 transition-transform duration-300">
                <svg class="size-8" fill="none" viewbox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 4H17.3334V17.3334H30.6666V30.6666H44V44H4V4Z" fill="currentColor"></path>
                </svg>
            </div>
            <h1 class="text-2xl font-black tracking-tight text-slate-900 dark:text-white">ODDHAY</h1>
        </a>

        <!-- Desktop Nav -->
        <nav class="hidden md:flex items-center gap-8">
            <a href="/" class="text-sm font-bold hover:text-primary transition-colors">হোম</a>
            <a href="/#features" class="text-sm font-bold hover:text-primary transition-colors">সেবাসমূহ</a>
            <a href="/courses" class="text-sm font-bold hover:text-primary transition-colors">কোর্সসমূহ</a>
            <a href="/about" class="text-sm font-bold hover:text-primary transition-colors">আমাদের সম্পর্কে</a>
            <a href="/#contact" class="text-sm font-bold hover:text-primary transition-colors">যোগাযোগ</a>
        </nav>

        <!-- Right Actions -->
        <div class="flex items-center gap-3">
            <button class="p-2 rounded-xl bg-slate-100/50 dark:bg-slate-800/50 hover:bg-primary/10 transition-colors"
                onclick="document.documentElement.classList.toggle('dark')">
                <span class="material-symbols-outlined text-[20px] block dark:hidden">dark_mode</span>
                <span class="material-symbols-outlined text-[20px] hidden dark:block text-amber-400">light_mode</span>
            </button>

            <div class="hidden md:flex items-center gap-3">
                <% if (locals.user) { %>
                    <a href="/dashboard"
                        class="text-base font-black px-8 py-3 text-primary hover:bg-primary/10 rounded-xl transition-all">ড্যাশবোর্ড</a>
                    <a href="/logout"
                        class="bg-red-500 text-white text-sm font-black px-6 py-2.5 rounded-xl shadow-lg shadow-red-500/10 hover:scale-105 active:scale-95 transition-all">লগআউট</a>
                    <% } else { %>
                        <a href="/login"
                            class="text-base font-black px-8 py-3 text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl transition-all">লগইন</a>
                        <a href="/register"
                            class="bg-primary text-white text-xl font-black px-12 py-4 rounded-xl shadow-lg shadow-primary/20 hover:scale-105 active:scale-95 transition-all">রেজিস্ট্রেশন</a>
                        <% } %>
            </div>

            <!-- Hamburger (New Design: 3 Bars) -->
            <button class="md:hidden flex flex-col gap-1.5 p-2" onclick="toggleSidebar(true)">
                <span class="w-7 h-1 bg-slate-900 dark:bg-white rounded-full"></span>
                <span class="w-5 h-1 bg-primary rounded-full ml-auto"></span>
                <span class="w-7 h-1 bg-slate-900 dark:bg-white rounded-full"></span>
            </button>
        </div>
    </div>
</header>

<!-- Sidebar Overlay (New Mobile Menu) -->
<div id="sidebar-overlay"
    class="fixed inset-0 bg-black/40 backdrop-blur-sm z-[2000] hidden opacity-0 transition-opacity duration-300"
    onclick="toggleSidebar(false)"></div>

<aside id="mobile-sidebar"
    class="fixed top-0 right-0 w-[80%] max-w-sm h-full bg-white dark:bg-background-dark z-[2001] translate-x-full shadow-2xl mobile-sidebar p-8 flex flex-col">
    <div class="flex items-center justify-between mb-12">
        <h2 class="text-xl font-black text-primary">মেনু</h2>
        <button class="size-10 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center"
            onclick="toggleSidebar(false)">
            <span class="material-symbols-outlined">close</span>
        </button>
    </div>

    <nav class="flex flex-col gap-5">
        <a href="/" class="text-2xl font-black hover:text-primary transition-colors"
            onclick="toggleSidebar(false)">হোম</a>
        <a href="/#features" class="text-2xl font-black hover:text-primary transition-colors"
            onclick="toggleSidebar(false)">সেবাসমূহ</a>
        <a href="/courses" class="text-2xl font-black hover:text-primary transition-colors"
            onclick="toggleSidebar(false)">কোর্সসমূহ</a>
        <a href="/about" class="text-2xl font-black hover:text-primary transition-colors"
            onclick="toggleSidebar(false)">আমাদের সম্পর্কে</a>
        <a href="/#contact" class="text-2xl font-black hover:text-primary transition-colors"
            onclick="toggleSidebar(false)">যোগাযোগ</a>
    </nav>

    <div class="mt-auto pt-8 border-t border-slate-100 dark:border-slate-800 flex flex-col gap-4">
        <% if (locals.user) { %>
            <a href="/dashboard"
                class="w-full py-4 bg-primary/10 text-primary rounded-2xl font-bold text-center">ড্যাশবোর্ড</a>
            <a href="/logout" class="w-full py-4 bg-red-500/10 text-red-500 rounded-2xl font-bold text-center">লগআউট</a>
            <% } else { %>
                <a href="/login"
                    class="w-full py-4 border-2 border-slate-100 dark:border-slate-800 rounded-2xl font-bold text-center">লগইন
                    করুন</a>
                <a href="/register"
                    class="w-full py-4 bg-primary text-white rounded-2xl font-black text-center shadow-xl shadow-primary/20">রেজিস্ট্রেশন
                    করুন</a>
                <% } %>
    </div>
</aside>

<script>
    function toggleSidebar(open) {
        const sidebar = document.getElementById('mobile-sidebar');
        const overlay = document.getElementById('sidebar-overlay');
        if (open) {
            overlay.classList.remove('hidden');
            setTimeout(() => {
                overlay.classList.remove('opacity-0');
                sidebar.classList.remove('translate-x-full');
            }, 10);
            document.body.style.overflow = 'hidden';
        } else {
            overlay.classList.add('opacity-0');
            sidebar.classList.add('translate-x-full');
            setTimeout(() => {
                overlay.classList.add('hidden');
            }, 300);
            document.body.style.overflow = '';
        }
    }

    function reveal() {
        var reveals = document.querySelectorAll(".reveal");
        for (var i = 0; i < reveals.length; i++) {
            var windowHeight = window.innerHeight;
            var elementTop = reveals[i].getBoundingClientRect().top;
            var elementVisible = 100;
            if (elementTop < windowHeight - elementVisible) {
                reveals[i].classList.add("active");
            }
        }
    }
    window.addEventListener("scroll", reveal);
    window.onload = reveal;
</script>