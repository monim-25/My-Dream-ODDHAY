<!DOCTYPE html>
<html class="light" lang="bn">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>পেমেন্ট চেকআউট | ODDHAY</title>
    <%- include('partials/head') %>
</head>

<body
    class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 min-h-screen flex items-center justify-center p-6 relative overflow-hidden">
    <!-- Decorative Blobs -->
    <div class="bg-blob -top-20 -left-20 opacity-30"></div>
    <div class="bg-blob -bottom-20 -right-20 opacity-20"></div>

    <div class="max-w-5xl w-full grid grid-cols-1 lg:grid-cols-5 gap-8 reveal relative z-10">

        <!-- Order Summary -->
        <div class="lg:col-span-2 card-smart flex flex-col h-fit">
            <h2 class="text-xl font-black mb-8 flex items-center gap-2">
                <span class="material-symbols-outlined text-primary">shopping_basket</span> অর্ডার সামারি
            </h2>

            <div class="space-y-6">
                <div class="relative aspect-video rounded-3xl overflow-hidden border-2 border-primary/5">
                    <img src="<%= course.thumbnail || 'https://images.unsplash.com/photo-1516321318423-f06f85e504b3?auto=format&fit=crop&q=80&w=600' %>"
                        class="w-full h-full object-cover">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"></div>
                    <div class="absolute bottom-4 left-4">
                        <span
                            class="text-[10px] font-black bg-primary text-white px-3 py-1 rounded-full uppercase tracking-tighter">
                            <%= course.category %>
                        </span>
                        <h3 class="font-black text-white text-lg leading-tight mt-2">
                            <%= course.title %>
                        </h3>
                    </div>
                </div>

                <div class="space-y-4 pt-4">
                    <div class="flex justify-between items-center">
                        <span class="text-sm font-bold text-slate-400">কোর্স ফি</span>
                        <span class="font-black">৳<%= course.plans[0].price %></span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-sm font-bold text-slate-400">ভ্যাট ও ট্যাক্স</span>
                        <span class="font-black text-emerald-500">৳০</span>
                    </div>
                    <div class="pt-6 border-t border-slate-100 dark:border-slate-800 flex justify-between items-center">
                        <span class="text-lg font-black italic">সর্বমোট</span>
                        <span class="text-3xl font-black text-primary">৳<%= course.plans[0].price %></span>
                    </div>
                </div>

                <div
                    class="p-6 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-800 space-y-3">
                    <div class="flex items-center gap-3 text-primary">
                        <span class="material-symbols-outlined text-xl">verified_user</span>
                        <p class="text-[10px] font-black uppercase tracking-widest leading-none">সিকিউর পেমেন্ট</p>
                    </div>
                    <p class="text-[11px] font-bold text-slate-500 leading-relaxed">আপনার পেমেন্ট ভেরিফাই হওয়ার পর
                        অটোমেটিক কোর্সটি আনলক হয়ে যাবে। কোনো সমস্যা হলে আমাদের সাপোর্ট নাম্বারে কল করুন।</p>
                </div>
            </div>
        </div>

        <!-- Payment Method -->
        <div class="lg:col-span-3 card-smart !p-0 overflow-hidden flex flex-col">
            <div class="p-10 border-b border-slate-50 dark:border-slate-800">
                <h2 class="text-xl font-black mb-1 flex items-center gap-2">
                    <span class="material-symbols-outlined text-emerald-500">account_balance_wallet</span> পেমেন্ট মেথড
                </h2>
                <p class="text-xs font-bold text-slate-400">আপনার পছন্দের মোবাইল ব্যাংকিং সার্ভিসটি বেছে নিন</p>
            </div>

            <div class="p-10 space-y-10">
                <!-- Method Selector -->
                <div class="grid grid-cols-2 gap-4">
                    <button onclick="selectMethod('bkash')" id="btn-bkash"
                        class="h-20 rounded-2xl border-2 border-pink-500 bg-pink-50 dark:bg-pink-500/10 text-pink-600 font-black flex flex-col items-center justify-center gap-1 transition-all shadow-lg shadow-pink-500/10">
                        <span class="text-sm uppercase tracking-tighter">bKash</span>
                        <span class="text-[9px] font-bold opacity-60">মার্চেন্ট পেমেন্ট</span>
                    </button>
                    <button onclick="selectMethod('nagad')" id="btn-nagad"
                        class="h-20 rounded-2xl border border-slate-100 dark:border-slate-800 text-slate-400 flex flex-col items-center justify-center gap-1 transition-all opacity-50 grayscale hover:opacity-100 hover:grayscale-0">
                        <span class="text-sm uppercase tracking-tighter text-orange-600">Nagad</span>
                        <span class="text-[9px] font-bold opacity-60">সেন্ড মানি</span>
                    </button>
                </div>

                <!-- Form Section -->
                <div class="relative min-h-[300px]">
                    <!-- bKash Form -->
                    <div id="form-bkash" class="space-y-8 reveal active">
                        <div class="p-8 bg-pink-500/5 rounded-3xl border border-pink-500/20 text-center">
                            <p class="text-xs font-bold text-slate-500 mb-4">নিচের মার্চেন্ট নাম্বারে পেমেন্ট করুন</p>
                            <div class="text-3xl font-black text-pink-600 tracking-widest font-mono select-all cursor-pointer bg-white dark:bg-slate-900 shadow-xl shadow-pink-500/5 py-4 inline-block px-8 rounded-2xl border border-pink-500/20"
                                onclick="navigator.clipboard.writeText('017XXXXXXXX')">
                                017XXXXXXXX
                            </div>
                        </div>

                        <form action="/buy-course/<%= course._id %>" method="POST" class="space-y-6">
                            <input type="hidden" name="planIndex" value="0">
                            <input type="hidden" name="paymentMethod" value="bkash">

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="group">
                                    <label
                                        class="block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 mb-2">বিকাশ
                                        নম্বর</label>
                                    <input type="text" name="phoneNumber" placeholder="017"
                                        class="w-full h-14 px-6 rounded-2xl bg-slate-50 dark:bg-slate-800 border-none focus:ring-2 focus:ring-pink-500 font-black text-base shadow-inner"
                                        required>
                                </div>
                                <div class="group">
                                    <label
                                        class="block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 mb-2">ট্রানজেকশন
                                        আইডি</label>
                                    <input type="text" name="transactionId" placeholder="TrxID"
                                        class="w-full h-14 px-6 rounded-2xl bg-slate-50 dark:bg-slate-800 border-none focus:ring-2 focus:ring-pink-500 font-black text-base shadow-inner uppercase"
                                        required>
                                </div>
                            </div>

                            <button type="submit"
                                class="btn-primary !h-16 w-full !bg-pink-500 hover:!bg-pink-600 shadow-xl shadow-pink-500/20 !rounded-2xl !text-base">পেমেন্ট
                                নিশ্চিত করুন</button>
                        </form>
                    </div>

                    <!-- Nagad Form -->
                    <div id="form-nagad" class="hidden space-y-8">
                        <div class="p-8 bg-orange-500/5 rounded-3xl border border-orange-500/20 text-center">
                            <p class="text-xs font-bold text-slate-500 mb-4">নিচের পার্সোনাল নাম্বারে সেন্ড মানি করুন
                            </p>
                            <div
                                class="text-3xl font-black text-orange-600 tracking-widest font-mono select-all cursor-pointer bg-white dark:bg-slate-900 shadow-xl shadow-orange-500/5 py-4 inline-block px-8 rounded-2xl border border-orange-500/20">
                                019XXXXXXXX
                            </div>
                        </div>
                        <form action="/buy-course/<%= course._id %>" method="POST" class="space-y-6">
                            <input type="hidden" name="planIndex" value="0">
                            <input type="hidden" name="paymentMethod" value="nagad">

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="group">
                                    <label
                                        class="block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 mb-2">নগদ
                                        নম্বর</label>
                                    <input type="text" name="phoneNumber" placeholder="019"
                                        class="w-full h-14 px-6 rounded-2xl bg-slate-50 dark:bg-slate-800 border-none focus:ring-2 focus:ring-orange-500 font-black text-base shadow-inner"
                                        required>
                                </div>
                                <div class="group">
                                    <label
                                        class="block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 mb-2">ট্রানজেকশন
                                        আইডি</label>
                                    <input type="text" name="transactionId" placeholder="TrxID"
                                        class="w-full h-14 px-6 rounded-2xl bg-slate-50 dark:bg-slate-800 border-none focus:ring-2 focus:ring-orange-500 font-black text-base shadow-inner uppercase"
                                        required>
                                </div>
                            </div>

                            <button type="submit"
                                class="btn-primary !h-16 w-full !bg-orange-500 hover:!bg-orange-600 shadow-xl shadow-orange-500/20 !rounded-2xl !text-base">পেমেন্ট
                                নিশ্চিত করুন</button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="mt-auto p-8 border-t border-slate-50 dark:border-slate-800 text-center">
                <a href="/course-details/<%= course._id %>"
                    class="text-xs font-black text-slate-400 hover:text-primary transition-all uppercase tracking-widest">অর্ডার
                    ক্যানসেল করুন</a>
            </div>
        </div>
    </div>

    <script>
        function selectMethod(method) {
            const btnBkash = document.getElementById('btn-bkash');
            const btnNagad = document.getElementById('btn-nagad');
            const formBkash = document.getElementById('form-bkash');
            const formNagad = document.getElementById('form-nagad');

            if (method === 'bkash') {
                formBkash.classList.remove('hidden');
                formNagad.classList.add('hidden');
                btnBkash.classList.add('border-2', 'border-pink-500', 'bg-pink-50', 'text-pink-600', 'shadow-lg');
                btnBkash.classList.remove('border-slate-100', 'text-slate-400', 'opacity-50', 'grayscale');
                btnNagad.classList.remove('border-2', 'border-orange-500', 'bg-orange-50', 'text-orange-600', 'shadow-lg');
                btnNagad.classList.add('border-slate-100', 'text-slate-400', 'opacity-50', 'grayscale');
            } else {
                formNagad.classList.remove('hidden');
                formBkash.classList.add('hidden');
                btnNagad.classList.add('border-2', 'border-orange-500', 'bg-orange-50', 'text-orange-600', 'shadow-lg', 'opacity-100', 'grayscale-0');
                btnNagad.classList.remove('border-slate-100', 'text-slate-400', 'opacity-50', 'grayscale');
                btnBkash.classList.remove('border-2', 'border-pink-500', 'bg-pink-50', 'text-pink-600', 'shadow-lg');
                btnBkash.classList.add('border-slate-100', 'text-slate-400', 'opacity-50', 'grayscale');
            }
        }
    </script>
</body>

</html>